<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (16) on Mon Dec 05 15:47:34 PST 2022 -->
<title>MergeDedupStoragePlugin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2022-12-05">
<meta name="description" content="declaration: package: org.epics.archiverappliance.common.mergededup, class: MergeDedupStoragePlugin">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/MergeDedupStoragePlugin.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.epics.archiverappliance.common.mergededup</a></div>
<h1 title="Class MergeDedupStoragePlugin" class="title">Class MergeDedupStoragePlugin</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.epics.archiverappliance.common.mergededup.MergeDedupStoragePlugin</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code>, <code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code>, <code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code>, <code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code>, <code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code>, <code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">MergeDedupStoragePlugin</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a>, <a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a>, <a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a>, <a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></span></div>
<div class="block">The MergeDedupStoragePlugin is primarily meant for achieving a small amount of failover in the archiving of a PV.
 The scheme is to have another appliance also archive the same PV and then merge the data from that appliance into this one during ETL. 
 This appliance is the <b><i>dest</i></b> appliance; this is where the data is merged into. 
 The <b><i>other</i></b> appliance is an independent EPICS archiver appliance archiving the same PV; that is, it is not part of this cluster of appliances.
 There are no special requirements for the <i>other</i> appliance other than that it should archive the same PV (and of course, a reasonably similar version to this one).
 No calls are made to the <i>other</i> appliance to cleanup any data after consolidation; so, for convenience, the <i>other</i> appliance can be configured with a BlackholeStoragePlugin to automatically delete data after a certain time.
   
 The MergeDedupStoragePlugin has two StoragePlugins parameters in its configuration.
 <ul>
 <li>The <code>dest</code> parameter configures the data store in this appliance.</li>
 <li>The <code>other</code> parameter points to the backup appliance using the <code>data_retrieval_url</code> of the <i>other</i> appliance.
 </li>
 </ul>
 The <i>other</i> appliance also acts an ETL gating point; that is, we do not move the data out of this data store unless we get a valid response from the <i>other</i> appliance when we fetch data during ETL. 
 So, ETL for this PV in this appliance will stop if you bring down the <i>other</i> appliance. It will automatically resume and continue from where it left off once you bring the <i>other</i> appliance back up.
 Note that data is merged into this appliance only during ETL. So, if you have data that is outside the ETL window ( some complex combination of pause resume etc), you'll have to manually merge the data in.
 This can be done using the <code>mergeInData</code> BPL call; the PV needs to be paused for this purpose.
 
 <div>As an example, assume that you wish to merge the data when you move data from the MTS to LTS; then you define your MTS in this appliance as a MergeDedupStoragePlugin.
 If, for example. 
 <ul>
 <li>you use <code>pb://localhost?name=MTS&amp;rootFolder=${ARCHAPPL_MEDIUM_TERM_FOLDER}&amp;partitionGranularity=PARTITION_DAY&amp;hold=2&amp;gather=1</code> as your regular MTS.</li>
 <li>the <code>data_retrieval_url</code> for the <i>other</i> appliance is <code>http://localhost:17669/retrieval</code></li>
 </ul>
 then, we'd define the MTS for this PV for this appliance as <pre><code><b>merge://</b>localhost?<b>name</b>=MTS
&amp;<b>dest</b>=pb%3A%2F%2Flocalhost%3Fname%3DMTS%26rootFolder%3D%24%7BARCHAPPL_MEDIUM_TERM_FOLDER%7D%26partitionGranularity%3DPARTITION_DAY%26hold%3D2%26gather%3D1
&amp;<b>other</b>=pbraw%3A%2F%2Flocalhost%3Fname%3DMTS%26rawURL%3Dhttp%253A%252F%252Flocalhost%253A17669%252Fretrieval%252Fdata%252FgetData.raw</code></pre>
 where both the <b>dest</b> and <b>other</b> parameters are URL encoded.
 <ul>
 <li><b>dest</b> is URL encoded version of <code>pb://localhost?name=MTS&amp;rootFolder=${ARCHAPPL_MEDIUM_TERM_FOLDER}&amp;partitionGranularity=PARTITION_DAY&amp;hold=2&amp;gather=1</code></li>
 <li><b>other</b> is URL encoded version of <code>pbraw://localhost?name=MTS&amp;<b>rawURL</b>=http%3A%2F%2Flocalhost%3A17669%2Fretrieval%2Fdata%2FgetData.raw</code>
 <ul>
 <li>where the <b>rawURL</b> is the URL encoded version of <code>http://localhost:17669/retrieval/data/getData.raw</code></li>
 </ul>
 </li>
 </ul> 
 </div>
 
 <div>From an implementation perspective, this can be understood as a plugin that delegates almost all calls to the <code>dest</code> plugin. 
 Calls that fetch data out of this plugin are merged/deduped with the <code>other</code> plugin.</div></div>
<dl class="notes">
<dt>Author:</dt>
<dd>mshankar</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><span class="member-name-link"><a href="#%3Cinit%3E()">MergeDedupStoragePlugin</a></span>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">appendData</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">appendToETLAppendData</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">This appends an EventStream to the ETL append data for a PV.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">commitETLAppendData</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">This concatenates the ETL append data for a PV with the PV's destination data.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#consolidateOnShutdown()">consolidateOnShutdown</a></span>()</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Should ETL move data from this source to the destination on shutdown.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>void</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">convert</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../etl/ConversionFunction.html" title="interface in org.epics.archiverappliance.etl">ConversionFunction</a>&nbsp;conversionFuntion)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Sometimes, PVs change types, EGUs etc.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;<a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">getDataForPV</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;startTime,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;endTime,
 <a href="../../retrieval/postprocessors/PostProcessor.html" title="interface in org.epics.archiverappliance.retrieval.postprocessors">PostProcessor</a>&nbsp;postProcessor)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">&nbsp;</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getDescription()">getDescription</a></span>()</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Get a string description of this plugin; one that can potentially be used in log messages and provide context.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">getETLStreams</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pv,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;currentTime,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Given a pv and a time, this method returns all the streams that are ready for ETL.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getFirstKnownEvent</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Get the first event for this PV.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getLastKnownEvent</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Gets the last known event in this destination.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getName()">getName</a></span>()</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Multiple PVs will probably use the same storage area and we identify the area using the name.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="../PartitionGranularity.html" title="enum class in org.epics.archiverappliance.common">PartitionGranularity</a></code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getPartitionGranularity()">getPartitionGranularity</a></span>()</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">&nbsp;</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>long</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getTotalSpace</a></span>&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Gets the total space left on this device.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getUsableSpace</a></span>&#8203;(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Gets the space available to this VM on this device</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>void</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">initialize</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;configURL,
 <a href="../../config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Each storage plugin is registered to a URI scheme; for example, the PlainStoragePBPlugin uses pb:// as the scheme.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">markForDeletion</a></span>&#8203;(<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&nbsp;info,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Delete the ETLStream identifier by info when you can as it has already been consumed by the ETL destination.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">prepareForNewPartition</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;ev,
 <a href="../../config/ArchDBRTypes.html" title="enum class in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;archDBRType,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">This informs the destination that we are switching to a new partition and this dest needs to execute its pre-processing for a new partition.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">renamePV</a></span>&#8203;(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;oldName,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;newName)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Change the name of a PV.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">runPostProcessors</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../config/ArchDBRTypes.html" title="enum class in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;dbrtype,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Run the post processors associated with this plugin if any for this pv.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#spaceConsumedByPV(java.lang.String)">spaceConsumedByPV</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Gets an estimate of the space consumed by this PV on this device.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>MergeDedupStoragePlugin</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">MergeDedupStoragePlugin</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">
<h3>getDataForPV</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/concurrent/Callable.html" title="class or interface in java.util.concurrent" class="external-link">Callable</a>&lt;<a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&gt;&gt;</span>&nbsp;<span class="element-name">getDataForPV</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;startTime,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;endTime,
 <a href="../../retrieval/postprocessors/PostProcessor.html" title="interface in org.epics.archiverappliance.retrieval.postprocessors">PostProcessor</a>&nbsp;postProcessor)</span>
                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Reader.html#getDataForPV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.sql.Timestamp,java.sql.Timestamp,org.epics.archiverappliance.retrieval.postprocessors.PostProcessor)">getDataForPV</a></code>&nbsp;in interface&nbsp;<code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">
<h3>getETLStreams</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&gt;</span>&nbsp;<span class="element-name">getETLStreams</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pv,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.sql/java/sql/Timestamp.html" title="class or interface in java.sql" class="external-link">Timestamp</a>&nbsp;currentTime,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">ETLSource</a></code></span></div>
<div class="block">Given a pv and a time, this method returns all the streams that are ready for ETL.
 For example, if the partition granularity of a source is an hour, then this method returns all the streams that are in this source for the previous hours.
 Ideally, these streams must be closed for writing and should not change.
 The ETL process will consolidates these streams into the ETL destination, which is expected to be at a longer time granularity.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLSource.html#getETLStreams(java.lang.String,java.sql.Timestamp,org.epics.archiverappliance.etl.ETLContext)">getETLStreams</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pv</code> - The name of PV.</dd>
<dd><code>currentTime</code> - The time that is being used as the cutoff. If we pass in a timestamp way out into the future, we should return all the streams available.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt>Returns:</dt>
<dd>List ETLinfo</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">
<h3>getFirstKnownEvent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></span>&nbsp;<span class="element-name">getFirstKnownEvent</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../Reader.html#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">Reader</a></code></span></div>
<div class="block">Get the first event for this PV.
 This call is used to optimize away calls to other readers that have older data.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Reader.html#getFirstKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getFirstKnownEvent</a></code>&nbsp;in interface&nbsp;<code><a href="../../Reader.html" title="interface in org.epics.archiverappliance">Reader</a></code></dd>
<dt>Parameters:</dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dt>Returns:</dt>
<dd>Event The first event of pvName</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">
<h3>getLastKnownEvent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a></span>&nbsp;<span class="element-name">getLastKnownEvent</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</span>
                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../Writer.html#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">Writer</a></code></span></div>
<div class="block">Gets the last known event in this destination. 
 Future events will be appended to this destination only if their timestamp is more recent than the timestamp of this event.
 If there is no last known event, then a null is returned.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Writer.html#getLastKnownEvent(org.epics.archiverappliance.common.BasicContext,java.lang.String)">getLastKnownEvent</a></code>&nbsp;in interface&nbsp;<code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dt>Returns:</dt>
<dd>Event The last known event of pvName</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">
<h3>appendData</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">appendData</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Writer.html#appendData(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.EventStream)">appendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../Writer.html" title="interface in org.epics.archiverappliance">Writer</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">
<h3>getTotalSpace</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getTotalSpace</span>&#8203;<span class="parameters">(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">StorageMetrics</a></code></span></div>
<div class="block">Gets the total space left on this device.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/StorageMetrics.html#getTotalSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getTotalSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt>Parameters:</dt>
<dd><code>storageMetricsContext</code> - StorageMetricsContext</dd>
<dt>Returns:</dt>
<dd>getTotalSpac &emsp;</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">
<h3>getUsableSpace</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getUsableSpace</span>&#8203;<span class="parameters">(<a href="../../etl/StorageMetricsContext.html" title="interface in org.epics.archiverappliance.etl">StorageMetricsContext</a>&nbsp;storageMetricsContext)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">StorageMetrics</a></code></span></div>
<div class="block">Gets the space available to this VM on this device</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/StorageMetrics.html#getUsableSpace(org.epics.archiverappliance.etl.StorageMetricsContext)">getUsableSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt>Parameters:</dt>
<dd><code>storageMetricsContext</code> - StorageMetricsContext</dd>
<dt>Returns:</dt>
<dd>getUsableSpace &emsp;</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="spaceConsumedByPV(java.lang.String)">
<h3>spaceConsumedByPV</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">spaceConsumedByPV</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/StorageMetrics.html#spaceConsumedByPV(java.lang.String)">StorageMetrics</a></code></span></div>
<div class="block">Gets an estimate of the space consumed by this PV on this device.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/StorageMetrics.html#spaceConsumedByPV(java.lang.String)">spaceConsumedByPV</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dt>Returns:</dt>
<dd>spaceConsumedByPV &emsp;</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">
<h3>prepareForNewPartition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">prepareForNewPartition</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../Event.html" title="interface in org.epics.archiverappliance">Event</a>&nbsp;ev,
 <a href="../../config/ArchDBRTypes.html" title="enum class in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;archDBRType,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span>
                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This informs the destination that we are switching to a new partition and this dest needs to execute its pre-processing for a new partition.
 For example, in a PlainPBStorage plugin, this will close the previous fileoutputstreams if any, open a new stream to the file backing the new partition writing a header if needed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#prepareForNewPartition(java.lang.String,org.epics.archiverappliance.Event,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">prepareForNewPartition</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>ev</code> - This is used to determine the partition for the new partition</dd>
<dd><code>archDBRType</code> - ArchDBRTypes</dd>
<dd><code>context</code> - ETLContext</dd>
<dt>Returns:</dt>
<dd>boolean True or False</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">
<h3>appendToETLAppendData</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">appendToETLAppendData</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../EventStream.html" title="interface in org.epics.archiverappliance">EventStream</a>&nbsp;stream,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span>
                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This appends an EventStream to the ETL append data for a PV.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#appendToETLAppendData(java.lang.String,org.epics.archiverappliance.EventStream,org.epics.archiverappliance.etl.ETLContext)">appendToETLAppendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>stream</code> - The EventStream to append to the append data for a PV.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt>Returns:</dt>
<dd>boolean True or False</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">
<h3>commitETLAppendData</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">commitETLAppendData</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">This concatenates the ETL append data for a PV with the PV's destination data.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#commitETLAppendData(java.lang.String,org.epics.archiverappliance.etl.ETLContext)">commitETLAppendData</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>context</code> - ETLContext</dd>
<dt>Returns:</dt>
<dd>boolean True or False</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">
<h3>runPostProcessors</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">runPostProcessors</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../config/ArchDBRTypes.html" title="enum class in org.epics.archiverappliance.config">ArchDBRTypes</a>&nbsp;dbrtype,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLDest.html#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">ETLDest</a></code></span></div>
<div class="block">Run the post processors associated with this plugin if any for this pv.
 The post processing is done after the commit and outside of the ETL transaction.
 This process is expected to catch up on previously missed/incomplete computation of cached post processing files.
 I can think of at least two usecases for this - one where we decide to go back and add a post processor for a pv and one where we change the algorithm for the post processor and want to recompute all the cached files again.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#runPostProcessors(java.lang.String,org.epics.archiverappliance.config.ArchDBRTypes,org.epics.archiverappliance.etl.ETLContext)">runPostProcessors</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pvName</code> - The name of PV.</dd>
<dd><code>dbrtype</code> - ArchDBRTypes</dd>
<dd><code>context</code> - ETLContext</dd>
<dt>Returns:</dt>
<dd>boolean True or False</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">
<h3>markForDeletion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">markForDeletion</span>&#8203;<span class="parameters">(<a href="../../etl/ETLInfo.html" title="class in org.epics.archiverappliance.etl">ETLInfo</a>&nbsp;info,
 <a href="../../etl/ETLContext.html" title="class in org.epics.archiverappliance.etl">ETLContext</a>&nbsp;context)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">ETLSource</a></code></span></div>
<div class="block">Delete the ETLStream identifier by info when you can as it has already been consumed by the ETL destination.
 You can delete it later or immediately.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLSource.html#markForDeletion(org.epics.archiverappliance.etl.ETLInfo,org.epics.archiverappliance.etl.ETLContext)">markForDeletion</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt>Parameters:</dt>
<dd><code>info</code> - ETLInfo</dd>
<dd><code>context</code> - ETLContext</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPartitionGranularity()">
<h3>getPartitionGranularity</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../PartitionGranularity.html" title="enum class in org.epics.archiverappliance.common">PartitionGranularity</a></span>&nbsp;<span class="element-name">getPartitionGranularity</span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#getPartitionGranularity()">getPartitionGranularity</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLSource.html#getPartitionGranularity()">getPartitionGranularity</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="consolidateOnShutdown()">
<h3>consolidateOnShutdown</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">consolidateOnShutdown</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../etl/ETLSource.html#consolidateOnShutdown()">ETLSource</a></code></span></div>
<div class="block">Should ETL move data from this source to the destination on shutdown. 
 For example, if you are using a ramdisk for the STS and you have a UPS, you can minimize any data loss but turning this bit on for data stores that are on the ramdisk.
 On shutdown, ETL will try to move the data out of this store into the next lifetime store.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLSource.html#consolidateOnShutdown()">consolidateOnShutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt>Returns:</dt>
<dd>boolean True or False</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getName()">
<h3>getName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getName</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#getName()">StoragePlugin</a></code></span></div>
<div class="block">Multiple PVs will probably use the same storage area and we identify the area using the name.
 This is principally used in capacity planning/load balancing to identify the storage area for the PV.
 We should make sure that storage's with similar lifetimes have the same name in all the appliances.
 The name is also used to identify the storage in the storage report.
 For example, the PlainPBStoragePlugin takes a name parameter and we should use something like STS as the identity for the short term store in all the appliances.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/StorageMetrics.html#getName()">getName</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/StorageMetrics.html" title="interface in org.epics.archiverappliance.etl">StorageMetrics</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../../StoragePlugin.html#getName()">getName</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt>Returns:</dt>
<dd>name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDescription()">
<h3>getDescription</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getDescription</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#getDescription()">StoragePlugin</a></code></span></div>
<div class="block">Get a string description of this plugin; one that can potentially be used in log messages and provide context.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLDest.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLDest.html" title="interface in org.epics.archiverappliance.etl">ETLDest</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../../etl/ETLSource.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../etl/ETLSource.html" title="interface in org.epics.archiverappliance.etl">ETLSource</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../../StoragePlugin.html#getDescription()">getDescription</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt>Returns:</dt>
<dd>description</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">
<h3>initialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initialize</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;configURL,
 <a href="../../config/ConfigService.html" title="interface in org.epics.archiverappliance.config">ConfigService</a>&nbsp;configService)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">StoragePlugin</a></code></span></div>
<div class="block">Each storage plugin is registered to a URI scheme; for example, the PlainStoragePBPlugin uses pb:// as the scheme.
 Configuration for a storage plugin typically comes in as a URL like URI.
 <ol> 
 <li>The config service identifies the storage plugin using the scheme (&quot;pb&quot; maps to PlainStoragePBPlugin)</li>
 <li>Creates an instance using the default constructor.</li>
 <li>Calls initialize with the complete URL.</li>
 </ol>
 The storage plugin is expected to use the parameters in the URL to initialize itself.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../StoragePlugin.html#initialize(java.lang.String,org.epics.archiverappliance.config.ConfigService)">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt>Parameters:</dt>
<dd><code>configURL</code> - The complete URL</dd>
<dd><code>configService</code> - &emsp;</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
<dt>See Also:</dt>
<dd><a href="../../config/StoragePluginURLParser.html" title="class in org.epics.archiverappliance.config"><code>StoragePluginURLParser</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">
<h3>renamePV</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">renamePV</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;oldName,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;newName)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">StoragePlugin</a></code></span></div>
<div class="block">Change the name of a PV. This happens occasionally in the EPICS world when people change the names of PVs but want to retain the data.
 This method is used to change the name of the PV in any of the datasets for PV <code>oldName</code>.
 For example, in PB files, the name of the PV is encoded in the file names and is also stored in the header. In this case, we expect the plugin to move the data to new files names and change the PV name in the file header.
 To avoid getting into issues about data changing when renaming files, the PV can be assumed to be in a paused state.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../StoragePlugin.html#renamePV(org.epics.archiverappliance.common.BasicContext,java.lang.String,java.lang.String)">renamePV</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt>Parameters:</dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>oldName</code> - The old PV name</dd>
<dd><code>newName</code> - The new PV name</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">
<h3>convert</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">convert</span>&#8203;<span class="parameters">(<a href="../BasicContext.html" title="class in org.epics.archiverappliance.common">BasicContext</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pvName,
 <a href="../../etl/ConversionFunction.html" title="interface in org.epics.archiverappliance.etl">ConversionFunction</a>&nbsp;conversionFuntion)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../StoragePlugin.html#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">StoragePlugin</a></code></span></div>
<div class="block">Sometimes, PVs change types, EGUs etc. 
 In these cases, we are left with the problem of what to do with the already archived data.
 We can rename the PV to a new but related name - this keeps the existing data as is.
 Or, we can attempt to convert to the new type, EGU etc.
 This method can be used to convert the existing data using the supplied conversion function.
 Conversions should be all or nothing; that is, first convert all the streams into temporary chunks and then do a bulk rename once all the conversions have succeeded.
 Note that we'll also be using the same conversion mechanism for imports and other functions that change data.
 So, when/if implementing the conversion function, make sure we respect the typical expectations within the archiver - monotonically increasing timestamps and so on.
 To avoid getting into issues about data changing when converting, the PV can be assumed to be in a paused state.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../StoragePlugin.html#convert(org.epics.archiverappliance.common.BasicContext,java.lang.String,org.epics.archiverappliance.etl.ConversionFunction)">convert</a></code>&nbsp;in interface&nbsp;<code><a href="../../StoragePlugin.html" title="interface in org.epics.archiverappliance">StoragePlugin</a></code></dd>
<dt>Parameters:</dt>
<dd><code>context</code> - &emsp;</dd>
<dd><code>pvName</code> - The PV name</dd>
<dd><code>conversionFuntion</code> - &emsp;</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - &emsp;</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
